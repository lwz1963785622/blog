(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{493:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react动画"}},[t._v("#")]),t._v(" React动画")]),t._v(" "),a("p",[t._v("动画就是使用页面局部的快速更新让人们产生动态效果的感觉。")]),t._v(" "),a("p",[t._v("动画可以帮助用户理解页面，增加应用的趣味性和可玩性，提高用户体验。有时候，一个好的加载动画甚至要比优化数据库、减少等待时间要有效得多。")]),t._v(" "),a("p",[t._v("React 通过 setState 让界面迅速发生变化，但动画的哲学告诉我们，变化要慢，得用一个逐渐变化的过程来过渡，从而帮助用户理解页面。")]),t._v(" "),a("p",[t._v("界面的变化可以分为 DOM 节点(或组件)的增与减以及 DOM 节点(或组件)属性的变化。 其中 React 提供的 TransitionGroup 能够帮助我们便捷地识别出增加或删除的组件，从而让我们能够专注于更加简单的属性变化的动画。")]),t._v(" "),a("h2",{attrs:{id:"react实现动画方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react实现动画方式"}},[t._v("#")]),t._v(" React实现动画方式")]),t._v(" "),a("p",[t._v("React实现动画有两种方式：")]),t._v(" "),a("ol",[a("li",[t._v("CSS渐变组"),a("br"),t._v("\n简化了将CSS动画应用于渐变的过程，在合适的渲染和重绘时间点有策略的添加和移除元素的class。")]),t._v(" "),a("li",[t._v("间隔动画"),a("br"),t._v("\n以牺牲性能为代价，提供更多的可扩展性和可控性。需要更多次的渲染，但同时也允许为css之外的内容（比如滚动条位置以及canvas绘图）添加动画。")])]),t._v(" "),a("h3",{attrs:{id:"css渐变组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css渐变组"}},[t._v("#")]),t._v(" CSS渐变组")]),t._v(" "),a("p",[t._v("ReactCSStransitionGroup是在插件类ReactTransitionGroup这个底层API基础上进一步封装的高级API，来简单的实现基本的CSS动画和过渡。")]),t._v(" "),a("h4",{attrs:{id:"安装react-addons-css-transition-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装react-addons-css-transition-group"}},[t._v("#")]),t._v(" 安装react-addons-css-transition-group")]),t._v(" "),a("div",{staticClass:"language-npmignore extra-class"},[a("pre",{pre:!0,attrs:{class:"language-npmignore"}},[a("code",[a("span",{pre:!0,attrs:{class:"token entry string"}},[t._v("npm install react-addons-css-transition-group --save")]),t._v("\n")])])]),a("h4",{attrs:{id:"引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引用"}},[t._v("#")]),t._v(" 引用")]),t._v(" "),a("div",{staticClass:"language-npmignore extra-class"},[a("pre",{pre:!0,attrs:{class:"language-npmignore"}},[a("code",[a("span",{pre:!0,attrs:{class:"token entry string"}},[t._v("import ReactCSSTransitionGroup from 'react-addons-css-transition-group'; "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v(" ES6")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token entry string"}},[t._v("var ReactCSSTransitionGroup = require('react-addons-css-transition-group'); "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/")]),t._v(" ES5 with npm")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("浏览器端使用：引入文件\n"),a("code",[t._v('<script src="../libs/react-with-addons.min.js"><\/script>')])])]),t._v(" "),a("p",[t._v("ReactCSSTransitionGroup组件常用属性介绍：")]),t._v(" "),a("ol",[a("li",[t._v("transitionName:关联CSS类，需要自己实现css动画实现的类。如"),a("code",[t._v('transitionName="box"')]),t._v("，那么你需要在css写以下类，分别是进入前后的状态和离开前后的状态")]),t._v(" "),a("li",[a("code",[t._v("transitionEnterTimeout")]),t._v(" 进入动画执行的时间")]),t._v(" "),a("li",[a("code",[t._v("transitionLeaveTimeout")]),t._v(" 离开的动画执行的时间")])]),t._v(" "),a("p",[t._v("假设我们有一个需要淡入淡出的需求:")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("//animate.less\n.box-enter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".box-enter.box-enter-active")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("transition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" opacity 500ms ease-in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".box-leave")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".box-leave.box-leave-active")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.01"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("transition")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" opacity 300ms ease-in"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n//\nimport ReactCSSTransitionGroup from "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-addons-css-transition-group'")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(";\nimport './animate.less'\nclass Animate extends React.Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("constructor()")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("...arguments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(";\n\t\tthis.state =")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("lists")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("["),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'海阔天空'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'在心里从此有个你'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'霸王别姬'")]),t._v("]\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("render()")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("var items = this.state.lists.map((item,index)=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("return <div key=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("onClick=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("this.handleRemove."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("</div>\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(")\n\t\treturn <div>\n\t\t\t<button onClick=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("this.handleAdd."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("this"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v('>切换</button>\n\t\t\t<ReactCSSTransitionGroup\n\t\t\t\ttransitionName="box"\n\t\t\t\ttransitionEnterTimeout=')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("500"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("transitionLeaveTimeout=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("300"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(">")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\t</ReactCSSTransitionGroup>\n\n\t\t</div>\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("handleAdd()")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tvar newLists =this.state.lists."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("["),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Enter some text'")]),t._v("]"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(";\n\t\tthis.setState(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("lists")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" newLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("handleRemove(i)")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tvar newLists = this.state.lists."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tnewLists."),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("splice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(";\n\t\tthis.setState(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("lists")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" newLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这样便轻松地实现了新增元素、删除元素的动画。")]),t._v(" "),a("p",[t._v("需要注意的地方是你要为 ReactCSSTransitionGroup 的子组件提供一个关键key，这个key是为了让React知道你添加了什么以及删除了什么。")]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("禁止动画")]),t._v(" 当你需要禁止动画时只需要设置 "),a("code",[t._v("transitionEnter={false}")]),t._v(" 或者 "),a("code",[t._v("transitionLeave={false}")]),t._v("。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);