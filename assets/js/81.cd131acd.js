(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{464:function(s,t,e){"use strict";e.r(t);var i=e(17),n=Object(i.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"jenkins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[s._v("#")]),s._v(" Jenkins")]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkins.png",alt:"docker"}})]),s._v(" "),e("blockquote",[e("p",[s._v("Jenkins是一款开源 CI&CD 软件，用于自动化各种任务，包括构建、测试和部署软件。\nJenkins 支持各种运行方式，可通过系统包、Docker 或者通过一个独立的 Java 程序。")])]),s._v(" "),e("h2",{attrs:{id:"jenkins-主要作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-主要作用"}},[s._v("#")]),s._v(" Jenkins 主要作用")]),s._v(" "),e("ul",[e("li",[s._v("l 持续、自动地构建/测试软件项目。")]),s._v(" "),e("li",[s._v("l 监控一些定时执行的任务。")])]),s._v(" "),e("h2",{attrs:{id:"jenkins-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装"}},[s._v("#")]),s._v(" Jenkins 安装")]),s._v(" "),e("h3",{attrs:{id:"机器要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#机器要求"}},[s._v("#")]),s._v(" 机器要求：")]),s._v(" "),e("ul",[e("li",[s._v("256 MB 内存，建议大于 512 MB")]),s._v(" "),e("li",[s._v("10 GB 的硬盘空间（用于 Jenkins 和 Docker 镜像）")])]),s._v(" "),e("h3",{attrs:{id:"需要安装以下软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#需要安装以下软件"}},[s._v("#")]),s._v(" 需要安装以下软件：")]),s._v(" "),e("ul",[e("li",[s._v("Java 8 ( JRE 或者 JDK 都可以)")]),s._v(" "),e("li",[s._v("Docker "),e("a",{attrs:{href:"https://hub.docker.com/r/jenkins/jenkins",target:"_blank",rel:"noopener noreferrer"}},[s._v("dockerhub"),e("OutboundLink")],1)])]),s._v(" "),e("h3",{attrs:{id:"基于docker-安装并启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基于docker-安装并启动"}},[s._v("#")]),s._v(" 基于docker 安装并启动")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("docker命令")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://hub.docker.com/r/jenkins/jenkins",target:"_blank",rel:"noopener noreferrer"}},[s._v("jenkins/jenkins:lts"),e("OutboundLink")],1),s._v(" 这个版本是长期维护的。")]),s._v(" "),e("p",[s._v("安装docker后直接运行此命令即可，没有安装镜像会自动安装并启动。")]),s._v(" "),e("p",[s._v("卷挂载的"),e("code",[s._v("/home/datajenkins")]),s._v(" 可自定义")]),s._v(" "),e("p",[s._v("Jenkins的配置目录默认在 "),e("code",[s._v("/var/jenkins_home")])]),s._v(" "),e("p",[s._v("暴露Jenkins默认8080端口给宿主机")])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\ndocker run -id --name jenkins -p 8080:8080 -v /home/data/jenkins:/var/jenkins_home jenkins/jenkins:lts\n\n")])])]),e("blockquote",[e("p",[s._v("如果发现jenkins 镜像未启动，但是以存在。可能是文件权限的问题 "),e("code",[s._v("chown -R 1000 /home/data/jenkins")])])]),s._v(" "),e("h2",{attrs:{id:"jenkins-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-配置"}},[s._v("#")]),s._v(" Jenkins 配置")]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/docker.png",alt:"docker"}}),s._v(" "),e("img",{attrs:{src:"/img/Jenkins/dockerps.png",alt:"dockerps"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("此时 docker 的 Jenkins 的镜像已经启动。")]),s._v(" "),e("p",[s._v("可以访问 一下8080端口测试一下。")])]),s._v(" "),e("blockquote",[e("p",[s._v("使用"),e("code",[s._v("docker logs Jenkins")]),s._v(" 或  进入Jenkins 镜像的目录中 查看下图路径。 "),e("code",[s._v("cat /var/lib/jenkins/secrets/initialAdminPassword")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsstart.png",alt:"dockerps"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinskey.png",alt:"dockerps"}})]),s._v(" "),e("h2",{attrs:{id:"安装插件-并-创建用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装插件-并-创建用户"}},[s._v("#")]),s._v(" 安装插件 并 创建用户")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("启动后安装插件"),e("code",[s._v("建议安装推荐")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinscj.png",alt:"jenkinscj"}})]),s._v(" "),e("blockquote",[e("p",[s._v("这里由于网络的原因，可能会出现部分失败。点击重试就好了。或者构建成功后可自行安装。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsset.png",alt:"jenkinsset"}})]),s._v(" "),e("blockquote",[e("p",[s._v("插件安装后会跳到创建用户名，密码 邮箱等信息。")])]),s._v(" "),e("h2",{attrs:{id:"配置-nodejs-ssh-gitee-插件。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-nodejs-ssh-gitee-插件。"}},[s._v("#")]),s._v(" 配置  nodejs ssh gitee 插件。")]),s._v(" "),e("ul",[e("li",[s._v("nodejs 为了我们构建前端项目。")]),s._v(" "),e("li",[s._v("ssh 方便打包后连接服务器进行一些操作。")]),s._v(" "),e("li",[s._v("gitee 插件方便使用webhooks 触发自动化部署。（这里我的代码存放在gitee，可自行安装其他插件）")])]),s._v(" "),e("h3",{attrs:{id:"nodejs安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nodejs安装"}},[s._v("#")]),s._v(" nodejs安装")]),s._v(" "),e("blockquote",[e("p",[s._v("进入系统管理->插件管理->选择"),e("code",[s._v("可选插件")]),s._v("-> 搜索nodejs 直接安装即可。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsaz1.png",alt:"jenkinsaz1"}}),s._v(" "),e("img",{attrs:{src:"/img/Jenkins/jenkinsaz2.png",alt:"jenkinsaz2"}}),s._v(" "),e("img",{attrs:{src:"/img/Jenkins/jenkinsaz3.png",alt:"jenkinsaz3"}})]),s._v(" "),e("h3",{attrs:{id:"配置nodejs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置nodejs"}},[s._v("#")]),s._v(" 配置nodejs")]),s._v(" "),e("blockquote",[e("p",[s._v("进入系统管理->全局工具配置->选择"),e("code",[s._v("可选插件")]),s._v("-> 搜索nodejs 直接安装即可。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsaz1.png",alt:"jenkinsaz1"}}),s._v(" "),e("img",{attrs:{src:"/img/Jenkins/jenkinsglo.png",alt:"jenkinsaz2"}}),s._v(" "),e("img",{attrs:{src:"/img/Jenkins/jenkinsnode.png",alt:"jenkinsnode"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("node 的版本建议安装"),e("a",{attrs:{href:"https://nodejs.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),e("OutboundLink")],1),s._v("的长期支持版本，避免出现其他意料之外的问题")])]),s._v(" "),e("h3",{attrs:{id:"ssh安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh安装"}},[s._v("#")]),s._v(" ssh安装")]),s._v(" "),e("blockquote",[e("p",[s._v("进入系统管理->插件管理->选择"),e("code",[s._v("可选插件")]),s._v("-> 搜索Publish Over SSH直接安装即可。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsssh.png",alt:"jenkinsssh"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("安装和node一样，上图为已安装后的示例。")])]),s._v(" "),e("h3",{attrs:{id:"ssh配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh配置"}},[s._v("#")]),s._v(" ssh配置")]),s._v(" "),e("blockquote",[e("p",[s._v("进入系统管理->系统配置->选择"),e("code",[s._v("Publish over SSH")]),s._v("-> 填写自己服务器的主机名 ip 等信息。-> 保存信息\n"),e("img",{attrs:{src:"/img/Jenkins/jenkinsxt.png",alt:"jenkinsxt"}})])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/jenkinsserve.png",alt:"jenkinsserve"}})]),s._v(" "),e("h3",{attrs:{id:"gitee安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitee安装"}},[s._v("#")]),s._v(" gitee安装")]),s._v(" "),e("blockquote",[e("p",[s._v("安装过程同上。")])]),s._v(" "),e("h3",{attrs:{id:"gitee配置密钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gitee配置密钥"}},[s._v("#")]),s._v(" gitee配置密钥")]),s._v(" "),e("blockquote",[e("p",[s._v("进入系统管理->系统配置->选择"),e("code",[s._v("gitee")]),s._v("-> 填写自己gitee密钥。-> 保存信息")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("参考"),e("a",{attrs:{href:"https://gitee.com/help/articles/4193#article-header0",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gitee.com/help/articles/4193#article-header0"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("获取"),e("a",{attrs:{href:"https://gitee.com/profile/personal_access_tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("gitee密钥"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("在 Connection name 中输入 Gitee 或者你想要的名字")])]),s._v(" "),e("li",[e("p",[s._v("Gitee host URL 中输入 Gitee 完整 URL地址： https://gitee.com （Gitee 私有化客户输入部署的域名）")])]),s._v(" "),e("li",[e("p",[s._v("Credentials 中如还未配置 Gitee APIV5 私人令牌，点击 Add - > Jenkins")])]),s._v(" "),e("li",[e("p",[s._v("Domain 选择 Global credentials")])]),s._v(" "),e("li",[e("p",[s._v("Kind 选择 Gitee API Token")])]),s._v(" "),e("li",[e("p",[s._v("Scope 选择你需要的范围")])]),s._v(" "),e("li",[e("p",[s._v("Gitee API Token 输入你的 Gitee 私人令牌，获取地址：https://gitee.com/profile/personal_access_tokens")])]),s._v(" "),e("li",[e("p",[s._v("ID, Descripiton 中输入你想要的 ID 和描述即可。")])]),s._v(" "),e("li",[e("p",[s._v("Credentials 选择配置好的 Gitee APIV5 Token")])]),s._v(" "),e("li",[e("p",[s._v("点击 Advanced ，可配置是否忽略 SSL 错误（视您的Jenkins环境是否支持），并可设置链接测超时时间（视您的网络环境而定）")])]),s._v(" "),e("li",[e("p",[s._v("点击 Test Connection 测试链接是否成功，如失败请检查以上 3，5，6 步骤。")])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("使用gitee 是为了配合webhooks 使用，如果你打算手动构建项目或者定时发布项目，个人感觉可以不配置gitee")])]),s._v(" "),e("h2",{attrs:{id:"新建任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建任务"}},[s._v("#")]),s._v(" 新建任务")]),s._v(" "),e("blockquote",[e("p",[s._v("点击主界面左侧的 新建任务，选择 构建一个自由风格的软件项目，填写任务名字。")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("创建工程后会直接进入配置页面，按照自己的需求配置（如下图） 基本选项就可以成功构建项目了。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz1.png",alt:"pz1"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz2.png",alt:"pz2"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz3.png",alt:"pz3"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("上图的配置中gitee webhook 的连接地址要放入gittee 的配置中。如下图")]),s._v(" "),e("p",[s._v("Gitee WebHook 密码可不填 也可自动生成或自定义  复制到下图的WebHook 密码中即可。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz4.png",alt:"pz4"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz5.png",alt:"pz5"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("上图我们把已经配置好的node 环境版本选上，并执行shell脚本。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/pz6.png",alt:"pz6"}})]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("最后直接保存构建 或者 gitee push 代码测试一下。")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/Jenkins/success.png",alt:"success"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);