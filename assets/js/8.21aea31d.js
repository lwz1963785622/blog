(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{397:function(s,t,a){"use strict";a.r(t);var n=a(17),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200606203315597.png",alt:"image-20200606203315597"}})]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("p",[s._v("官方文档：https://docs.docker.com/docker-for-windows/")]),s._v(" "),a("p",[s._v("【官方文档超级详细】")]),s._v(" "),a("p",[s._v("仓库地址：https://hub.docker.com/")]),s._v(" "),a("p",[s._v("【发布到仓库，git pull push】")]),s._v(" "),a("p",[s._v("b站教程：https://www.bilibili.com/video/BV1og4y1q7M4?")]),s._v(" "),a("p",[s._v("【这个教程非常简洁！且深入！基于企业应用场景！推荐！以下笔记都基于该课程】")]),s._v(" "),a("h2",{attrs:{id:"前期基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前期基础"}},[s._v("#")]),s._v(" 前期基础")]),s._v(" "),a("p",[s._v("linux基本命令，类似cd，mkdir等")]),s._v(" "),a("h2",{attrs:{id:"docker概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker概述"}},[s._v("#")]),s._v(" Docker概述")]),s._v(" "),a("h3",{attrs:{id:"docker为什么会出现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker为什么会出现"}},[s._v("#")]),s._v(" Docker为什么会出现")]),s._v(" "),a("p",[s._v("一款产品，开发和上线两套环境，应用环境配置费时费力，而且容易出问题")]),s._v(" "),a("p",[s._v("尤其对于机器学习和深度学习的库更是如此，很可能存在版本问题、底层依赖冲突问题")]),s._v(" "),a("p",[s._v("所以发布项目时，不只是一套代码过去，而是代码+环境整体打包过去")]),s._v(" "),a("p",[s._v("所谓开发即运维，保证系统稳定性，提高部署效率")]),s._v(" "),a("p",[s._v("使用Docker后的流程：")]),s._v(" "),a("p",[s._v("开发：建立模型--环境--打包带上环境，即镜像--放到Docker仓库")]),s._v(" "),a("p",[s._v("部署：下载Docker中的镜像，直接运行即可")]),s._v(" "),a("p",[s._v("Docker的思想来自于集装箱，集装箱，对环境进行隔离")]),s._v(" "),a("p",[s._v("Docker通过隔离机制，可以将服务器利用到极致。")]),s._v(" "),a("h3",{attrs:{id:"docker的历史"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker的历史"}},[s._v("#")]),s._v(" Docker的历史")]),s._v(" "),a("p",[s._v("2010年，几个搞IT的人，在美国成立一家公司"),a("code",[s._v("dotCloud")])]),s._v(" "),a("p",[s._v("做一些pass的云计算服务")]),s._v(" "),a("p",[s._v("他们将自己的容器化技术命名为Docker")]),s._v(" "),a("p",[s._v("Docker基于Go语言开发")]),s._v(" "),a("p",[s._v("Docker刚刚诞生的时候，没有引起行业的注意，dotCloud活不下去")]),s._v(" "),a("p",[s._v("然后他们决定开源")]),s._v(" "),a("p",[s._v("2013年，创始人将Docker开源，不开则以，一开惊人，刚开源的时候，每个月都会更新一个版本")]),s._v(" "),a("p",[s._v("2014年4月9日，Docker 1.0发布")]),s._v(" "),a("h3",{attrs:{id:"容器vs虚拟机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器vs虚拟机"}},[s._v("#")]),s._v(" 容器vs虚拟机")]),s._v(" "),a("p",[s._v("在容器技术出来之前，用的是虚拟机技术")]),s._v(" "),a("h4",{attrs:{id:"虚拟机原理示意图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机原理示意图"}},[s._v("#")]),s._v(" 虚拟机原理示意图")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200606205436434.png",alt:"image-20200606205436434"}})]),s._v(" "),a("p",[s._v("缺点：")]),s._v(" "),a("ol",[a("li",[s._v("资源占用多")]),s._v(" "),a("li",[s._v("冗余步骤多")]),s._v(" "),a("li",[s._v("启动很慢")])]),s._v(" "),a("h4",{attrs:{id:"容器化技术示意图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器化技术示意图"}},[s._v("#")]),s._v(" 容器化技术示意图")]),s._v(" "),a("p",[s._v("不是模拟的完整的操作系统")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200606205739655.png",alt:"image-20200606205739655"}})]),s._v(" "),a("h4",{attrs:{id:"二者对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二者对比"}},[s._v("#")]),s._v(" 二者对比")]),s._v(" "),a("p",[s._v("比较虚拟机和Docker的不同")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th"),s._v(" "),a("th",[s._v("传统虚拟机")]),s._v(" "),a("th",[s._v("Docker")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("虚拟内容")]),s._v(" "),a("td",[s._v("硬件+完整的操作系统+软件")]),s._v(" "),a("td",[s._v("APP+LIB")])]),s._v(" "),a("tr",[a("td",[s._v("大小")]),s._v(" "),a("td",[s._v("笨重，通常几个G")]),s._v(" "),a("td",[s._v("轻便几个M或KB")])]),s._v(" "),a("tr",[a("td",[s._v("启动速度")]),s._v(" "),a("td",[s._v("慢，分钟级")]),s._v(" "),a("td",[s._v("快，秒级")])]),s._v(" "),a("tr",[a("td"),s._v(" "),a("td"),s._v(" "),a("td")])])]),s._v(" "),a("h2",{attrs:{id:"docker安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[s._v("#")]),s._v(" Docker安装")]),s._v(" "),a("h3",{attrs:{id:"docker的基本组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker的基本组成"}},[s._v("#")]),s._v(" Docker的基本组成")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200606212250845.png",alt:"image-20200606212250845"}})]),s._v(" "),a("p",[s._v("明确几个概念：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("镜像(image)：docker镜像好比一个模板，可以通过这个模板来创建容器(container)，一个镜像可以创建多个容器，类似Python中的Class")])]),s._v(" "),a("li",[a("p",[s._v("容器(container)：类似Python中通过Class创建的实例，Object；容器可以理解为一个简易的系统")])]),s._v(" "),a("li",[a("p",[s._v("仓库(repository)：存放镜像的地方，")]),s._v(" "),a("p",[s._v("分为共有仓库和私有仓库")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Docker Hub：国外的")])]),s._v(" "),a("li",[a("p",[s._v("阿里云：配置镜像加速")])])])])]),s._v(" "),a("h3",{attrs:{id:"环境准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[s._v("#")]),s._v(" 环境准备")]),s._v(" "),a("p",[s._v("我们要有一台服务器，并且可以操作它")]),s._v(" "),a("ol",[a("li",[s._v("Linux命令基础，购买linux阿里云的服务器")]),s._v(" "),a("li",[s._v("CentOS 7")]),s._v(" "),a("li",[s._v("使用Xbash链接远程服务器")])]),s._v(" "),a("h3",{attrs:{id:"安装xbash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装xbash"}},[s._v("#")]),s._v(" 安装xbash")]),s._v(" "),a("p",[s._v("下载CentOS7 https://www.jianshu.com/p/a63f47e096e8")]),s._v(" "),a("p",[s._v("下载VMware 360软件管家下载")]),s._v(" "),a("p",[s._v("VMware配置虚拟机 https://blog.csdn.net/babyxue/article/details/80970526")]),s._v(" "),a("p",[s._v("xbash链接服务器 https://blog.csdn.net/zzy1078689276/article/details/77280814")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -r")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-1127.el7.x86_64\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200608091950655.png",alt:"image-20200608091950655"}})]),s._v(" "),a("p",[s._v("用户名")]),s._v(" "),a("p",[s._v("密码")]),s._v(" "),a("p",[s._v("查看ip：vmware里面输入，ip addIPr")]),s._v(" "),a("h3",{attrs:{id:"centos安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos安装"}},[s._v("#")]),s._v(" Centos安装")]),s._v(" "),a("p",[s._v("https://docs.docker.com/engine/install/centos/")]),s._v(" "),a("h3",{attrs:{id:"卸载旧的版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载旧的版本"}},[s._v("#")]),s._v(" 卸载旧的版本")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 卸载旧的版本")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200608092628498.png",alt:"image-20200608092628498"}})]),s._v(" "),a("h3",{attrs:{id:"安装基本环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装基本环境"}},[s._v("#")]),s._v(" 安装基本环境")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装基本的安装包")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n")])])]),a("p",[s._v("!")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200608093114774.png",alt:"image-20200608093114774"}})]),s._v(" "),a("h3",{attrs:{id:"设置镜像的仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置镜像的仓库"}},[s._v("#")]),s._v(" 设置镜像的仓库")]),s._v(" "),a("p",[s._v("注意！！下载默认用国外的，太慢不要用！")]),s._v(" "),a("p",[s._v("用国内镜像，百度搜索，docker的阿里云镜像地址")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不要用官网默认这个！")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://download.docker.com/linux/centos/docker-ce.repo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认是国外的")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 换成下面的")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阿里云镜像")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616145430166.png",alt:"image-20200616145430166"}})]),s._v(" "),a("p",[s._v("直接复制粘贴就OK了")]),s._v(" "),a("p",[s._v("更像软件包索引")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum makecache fast\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616150014082.png",alt:"image-20200616150014082"}})]),s._v(" "),a("p",[s._v("没有问题的话就是可以用的")]),s._v(" "),a("h3",{attrs:{id:"安装docker引擎"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker引擎"}},[s._v("#")]),s._v(" 安装docker引擎")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-ce 社区版 ee 企业版")]),s._v("\n")])])]),a("p",[s._v("注意这里会有几个个y/n的判断")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616150818860.png",alt:"image-20200616150818860"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616150922549.png",alt:"image-20200616150922549"}})]),s._v(" "),a("p",[s._v("要看到Complet再收手！")]),s._v(" "),a("h3",{attrs:{id:"启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动docker"}},[s._v("#")]),s._v(" 启动Docker")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl start docker "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 代表启动成功")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker version\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Client: Docker Engine - Community\n Version:           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v(".11\n API version:       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.40")]),s._v("\n Go version:        go1.13.10\n Git commit:        42e35e61f3\n Built:             Mon Jun  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 09:13:48 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("\n OS/Arch:           linux/amd64\n Experimental:      "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\nServer: Docker Engine - Community\n Engine:\n  Version:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v(".11\n  API version:      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.40")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("minimum version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.12")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Go version:       go1.13.10\n  Git commit:       42e35e61f3\n  Built:            Mon Jun  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 09:12:26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("\n  OS/Arch:          linux/amd64\n  Experimental:     "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n containerd:\n  Version:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".13\n  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429\n runc:\n  Version:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".0-rc10\n  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd\n docker-init:\n  Version:          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.18")]),s._v(".0\n  GitCommit:        fec3683\n\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run hello-world\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616151641013.png",alt:"image-20200616151641013"}})]),s._v(" "),a("p",[s._v("中间一堆是签名信息")]),s._v(" "),a("p",[s._v("run的运行流程图")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616161441669.png",alt:"image-20200616161441669"}})]),s._v(" "),a("p",[s._v("查看下载的镜像")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker images\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616151913277.png",alt:"image-20200616151913277"}})]),s._v(" "),a("h3",{attrs:{id:"卸载docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载docker"}},[s._v("#")]),s._v(" 卸载Docker")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 卸载依赖\nyum remove docker-ce docker-ce-cli containerd.io\n\n# 删除资源\nrm -rf /var/lib/docker # docker 的默认工作路径\n\n")])])]),a("h3",{attrs:{id:"阿里云镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#阿里云镜像加速"}},[s._v("#")]),s._v(" 阿里云镜像加速")]),s._v(" "),a("p",[s._v("支付宝扫码登录，短信验证，确认授权")]),s._v(" "),a("p",[s._v("我有两个问题")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("阿里云镜像加速必须配置嘛？")]),s._v(" "),a("blockquote",[a("p",[s._v("哎呦我去: 加速快")]),s._v(" "),a("p",[s._v("哎呦我去: 要是翻墙就无所谓了")])])]),s._v(" "),a("li",[a("p",[s._v("这个阿里云必须要买嘛，买哪个，我看阿里云好多产品")]),s._v(" "),a("blockquote",[a("p",[s._v("哎呦我去:不需要买")]),s._v(" "),a("p",[s._v("哎呦我去:免费的")]),s._v(" "),a("p",[s._v("哎呦我去:阿里云搜索容器服务")]),s._v(" "),a("p",[s._v("哎呦我去:有一个镜像加速")])])]),s._v(" "),a("li",[a("p",[s._v("这个地址是哪来的呀")])])]),s._v(" "),a("p",[s._v("操作")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616154429105.png",alt:"image-20200616154429105"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616154455964.png",alt:"image-20200616154455964"}})]),s._v(" "),a("p",[s._v("控制台搜索 容器镜像服务")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616155201285.png",alt:"image-20200616155201285"}})]),s._v(" "),a("p",[s._v("找到加速地址")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616155649476.png",alt:"image-20200616155649476"}})]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('sudo mkdir -p /etc/docker # 创建一个陌路\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://uyfgafsw.mirror.aliyuncs.com"]\n}\nEOF # 编写配置文件\n\nsudo systemctl daemon-reload # 重启服务\nsudo systemctl restart docker # 重启docker\n')])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616160315298.png",alt:"image-20200616160315298"}})]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.processon.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("在线画图软件ProcessOn"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV177411K7bH",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器及购买相关介绍"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"底层原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#底层原理"}},[s._v("#")]),s._v(" 底层原理")]),s._v(" "),a("p",[s._v("Docker是真么工作的？")]),s._v(" "),a("p",[s._v("Docker是一个Client-Server结构的系统，Docker的守护进程在主机上。通过Socket从客户端访问！")]),s._v(" "),a("p",[s._v("DockerServer接受到Docker-Client的指令，")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616162107363.png",alt:"image-20200616162107363"}})]),s._v(" "),a("p",[s._v("Docker为什么比VM快？")]),s._v(" "),a("ol",[a("li",[s._v("Docker有着比虚拟机更少的抽象层")]),s._v(" "),a("li",[s._v("docker主要用的是宿主机的内核，vm需要Guest OS")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616162302653.png",alt:"image-20200616162302653"}})]),s._v(" "),a("p",[s._v("所以说新建一个容器的时候，docker不需要像虚拟机一样重新加载一个操作系统内核，避免引导")]),s._v(" "),a("h2",{attrs:{id:"docker命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker命令"}},[s._v("#")]),s._v(" Docker命令")]),s._v(" "),a("h3",{attrs:{id:"帮助命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#帮助命令"}},[s._v("#")]),s._v(" 帮助命令")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker version # 显示docker的基本信息\ndocker info # 系统信息，镜像和容器的数量\ndocker 命令 --help # 全部信息\n")])])]),a("p",[a("a",{attrs:{href:"https://docs.docker.com/reference/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网文档"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616163338187.png",alt:"image-20200616163338187"}})]),s._v(" "),a("h3",{attrs:{id:"镜像命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像命令"}},[s._v("#")]),s._v(" 镜像命令")]),s._v(" "),a("h4",{attrs:{id:"docker-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-images"}},[s._v("#")]),s._v(" docker images")]),s._v(" "),a("p",[s._v("查看所有本地主机上的镜像")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616172056530.png",alt:"image-20200616172056530"}})]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 解释\nREPOSITORY  # 镜像仓库源\nTAG                 # 镜像的标签\nIMAGE ID           # 镜像的ID\nCREATED           # 镜像的创建时间\nSIZE # 镜像的大小\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("--all , -a\t\tShow all images "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default hides intermediate images"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有")]),s._v("\n--digests\t\tShow digests\n--filter , -f\t\tFilter output based on conditions provided\n--format\t\tPretty-print images using a Go template\n--no-trunc\t\tDon’t truncate output\n--quiet , -q\t\tOnly show numeric IDs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示id")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616172651835.png",alt:"image-20200616172651835"}})]),s._v(" "),a("h4",{attrs:{id:"docker-search"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-search"}},[s._v("#")]),s._v(" docker search")]),s._v(" "),a("p",[s._v("搜索仓库中的镜像，相当于网页搜索")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("网页搜索"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616173009473.png",alt:"image-20200616173009473"}})]),s._v(" "),a("p",[s._v("mysql")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616173050756.png",alt:"image-20200616173050756"}})]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker search mysql\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616173308194.png",alt:"image-20200616173308194"}})]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker search --help\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616173740981.png",alt:"image-20200616173740981"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解释")]),s._v("\nOptions:\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print search using a Go template\n      --limit int       Max number of search results "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --no-trunc        Don't truncate output\n\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker search mysql --filter=STARS=3000 # 搜索出Stars大于3000的\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200616174440284.png",alt:"image-20200616174440284"}})]),s._v(" "),a("h4",{attrs:{id:"docker-pull"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-pull"}},[s._v("#")]),s._v(" docker pull")]),s._v(" "),a("p",[s._v("下载镜像")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker pull mysql "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载mysql镜像，default tag，默认最新版latest")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo systemctl daemon-reload")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo systemctl restart docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql")]),s._v("\nUsing default tag: latest "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不写tag默认最新版")]),s._v("\nlatest: Pulling from library/mysql\n8559a31e96f4: Pull complete  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# layer 分层下载，docker image的核心 联合文件系统")]),s._v("\nd51ce1c2e575: Pull complete \nc2344adc4858: Pull complete \nfcf3ceff18fc: Pull complete \n16da0c38dc5b: Pull complete \nb905d1797e97: Pull complete \n4b50d1c6b05c: Pull complete \nc75914a65ca2: Pull complete \n1ae8042bdd09: Pull complete \n453ac13c00a3: Pull complete \n9e680cd72f08: Pull complete \na6b5dc864b6c: Pull complete \nDigest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#签名")]),s._v("\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:latest\ndocker.io/library/mysql:latest "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 真实地址")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 即")]),s._v("\ndocker pull mysql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价于")]),s._v("\ndocker pull docker.io/library/mysql:latest\n\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定版本下载 ")]),s._v("\ndocker pull mysql:5.7\n")])])]),a("p",[s._v("版本来自于官网，版本库https://hub.docker.com/_/mysql")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617094339687.png",alt:"image-20200617094339687"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617100948088.png",alt:"image-20200617100948088"}})]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker images\n")])])]),a("p",[s._v("此时查看镜像，可以看到新下载的两个")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617101105899.png",alt:"image-20200617101105899"}})]),s._v(" "),a("h4",{attrs:{id:"docker-rmi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-rmi"}},[s._v("#")]),s._v(" docker rmi")]),s._v(" "),a("p",[s._v("remove images")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除一个 可以通过名称 也可以指定id -f表示删除所有")]),s._v("\ndocker rmi -f 9cfcce23593a\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除多个 用空格分隔id")]),s._v("\ndocker rmi -f "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有 ")]),s._v("\ndocker rmi -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker images -aq"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# images -aq就是查所有镜像id，从而递归删除")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617102049613.png",alt:"image-20200617102049613"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617102126526.png",alt:"image-20200617102126526"}})]),s._v(" "),a("h3",{attrs:{id:"容器命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器命令"}},[s._v("#")]),s._v(" 容器命令")]),s._v(" "),a("p",[s._v("说明：有了镜像才能创建容器，linux，下载一个centos镜像来测试学习")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker pull centos\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617103406974.png",alt:"image-20200617103406974"}})]),s._v(" "),a("h4",{attrs:{id:"新建容器并启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建容器并启动"}},[s._v("#")]),s._v(" 新建容器并启动")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("可选参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" image\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数说明")]),s._v("\n--name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("“Name” "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器名字，用于区分容器")]),s._v("\n-d 后台方式运行\n-it 使用交互方式运行，进入容器查看内容\n-p 指定容器的端口 如-p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("::8080\n\t-p ip:主机端口：容器端口\n\t-p 主机端口:容器端口\n\t-p 容器端口\n\t\n-p 随机指定端口\n")])])]),a("h4",{attrs:{id:"进入退出容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入退出容器"}},[s._v("#")]),s._v(" 进入退出容器")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入")]),s._v("\ndocker run -it centos /bin/bash \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617104004004.png",alt:"image-20200617104004004"}})]),s._v(" "),a("p",[s._v("注意这里面主机名，编程了centos的id")]),s._v(" "),a("p",[s._v("这里面就是一个容器，套娃啊")]),s._v(" "),a("h4",{attrs:{id:"查看运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看运行的容器"}},[s._v("#")]),s._v(" 查看运行的容器")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 查看正在运行的容器\ndocker ps\n# 查看曾经运行的容器\ndocker ps -a\n# 显示最近创建的容器，设置显示个数\ndocker ps -a - n=? \n# 只显示容器的编号\ndocker ps -aq\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES\n9939864fa2e6        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/bash"')]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago                       unruffled_knuth\n5f42e9930435        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" minutes ago                       lucid_cannon\na89ddb393d3d        bf756fb1ae65        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" hours ago                        gracious_bhabha\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a -n=2")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES\n9939864fa2e6        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/bash"')]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" minutes ago                       unruffled_knuth\n5f42e9930435        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes ago \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -aq")]),s._v("\n9939864fa2e6\n5f42e9930435\na89ddb393d3d\n\n")])])]),a("h4",{attrs:{id:"退出容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出容器"}},[s._v("#")]),s._v(" 退出容器")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器停止退出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器不停止退出 注意必须在英文输入法下，中文输入法不行")]),s._v("\nCtrl + P + Q\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos /bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@bfcea13c40cd /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [root@192 ~]# docker ps ##注意这里会自动给个命令，删掉")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES\nbfcea13c40cd        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         About a minute ago   Up About a minute                       stoic_wilson\nedbd9366d959        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes ago        Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes                            affectionate_bartik\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it edbd9366d959 /bin/bash ## 再次进入")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@edbd9366d959 /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit ##停止并推出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n")])])]),a("h4",{attrs:{id:"删除容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[s._v("#")]),s._v(" 删除容器")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定容器 不能删除正在运行的容器，如果强制删除 rm -f")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有容器")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有容器")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\nbfcea13c40cd        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" minutes                                   stoic_wilson\nedbd9366d959        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" minutes                                   affectionate_bartik\n9939864fa2e6        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/bash"')]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v(" minutes ago                       unruffled_knuth\n5f42e9930435        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("49")]),s._v(" minutes ago                       lucid_cannon\na89ddb393d3d        bf756fb1ae65        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" hours ago        Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" hours ago                         gracious_bhabha\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm 5f42e9930435")]),s._v("\n5f42e9930435\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm edbd9366d959      # 注意正在运行的容器不能删除")]),s._v("\nError response from daemon: You cannot remove a running container edbd9366d9596c744dd449119269b04de2f2a494e7fc471f6396bcefd94c33fe. Stop the container before attempting removal or force remove\n\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -aq # 所有容器id")]),s._v("\nbfcea13c40cd\nedbd9366d959\n9939864fa2e6\na89ddb393d3d\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker rm -f $(docker ps -aq) # 全部删除")]),s._v("\nbfcea13c40cd\nedbd9366d959\n9939864fa2e6\na89ddb393d3d\n\n")])])]),a("h4",{attrs:{id:"启动和停止容器的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动和停止容器的操作"}},[s._v("#")]),s._v(" 启动和停止容器的操作")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker start\ndocker restart\ndocker stop\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos /bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@7b1a7dd10ea4 /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps #查看正在运行的")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a # 查看历史运行过的")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\n7b1a7dd10ea4        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v(" seconds ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" seconds ago                       fervent_mirzakhani\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker start 7b1a7dd10ea4 # 启动当前这个容器 container id 粘过 来")]),s._v("\n7b1a7dd10ea4\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps # 查看当前运行容器 发现启动成功")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n7b1a7dd10ea4        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" minutes ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" seconds                           fervent_mirzakhani\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker stop 7b1a7dd10ea4 # 停止运行")]),s._v("\n7b1a7dd10ea4\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps # 再次查看 没有这个容器了")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n\n\n")])])]),a("h3",{attrs:{id:"常用其他命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用其他命令"}},[s._v("#")]),s._v(" 常用其他命令")]),s._v(" "),a("h4",{attrs:{id:"后台启动docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后台启动docker"}},[s._v("#")]),s._v(" 后台启动docker")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -d 镜像名\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用docker ps 查看的时候 发现停止了")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台运行，docker发现前台没有，容器启动后，发现自己没有提供服务，会立刻停止")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Last login: Wed Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":47:35 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start docker # 关机后重启了，需要启动docker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d centos # 运行")]),s._v("\n8ce188e5fee31c2fac93c0a405ee1a95c38dbc50cb47c35b19c0039c27558ded\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a # 查看正在运行的")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES\n8ce188e5fee3        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" seconds ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" seconds ago                       tender_dirac\n7b1a7dd10ea4        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" hours ago                          fervent_mirzakhani\n\n")])])]),a("h4",{attrs:{id:"查看日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[s._v("#")]),s._v(" 查看日志")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker logs\ndocker logs -f -t --tail n 【id】\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617161744298.png",alt:"image-20200617161744298"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs --help")]),s._v("\n\nUsage:\tdocker logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" CONTAINER\n\nFetch the logs of a container\n\nOptions:\n      --details        Show extra details provided to logs\n  -f, --follow         Follow log output\n      --since string   Show logs since timestamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g.\n                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-01-02T13:23:37"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or relative\n                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. 42m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" minutes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --tail string    Number of lines to show from the\n                       end of the logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -t, --timestamps     Show timestamps "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 时间戳")]),s._v("\n      --until string   Show logs before a timestamp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g.\n                       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v("-01-02T13:23:37"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or relative\n                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. 42m "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" minutes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("whiel "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" shenzai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" \n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行一个")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos /bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [root@192 ~]# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nc2887d35c71d        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("57")]),s._v(" seconds ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v(" seconds                           vigorous_kare\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志，由于没有运行脚本，所以啥也没显示")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs -f -t --tail 10 c2887d35c71d")]),s._v("\n^C "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ctrl+c退出")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行centos里面加个脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -d centos /bin/sh -c "while true;do echo shenzai;sleep 1;done"')]),s._v("\ncb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\ncb6d7fbc3f27        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh -c \'while t…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" seconds ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds                            dreamy_almeida\nc2887d35c71d        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes                            vigorous_kare\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看日志 发现隔一秒打印一条")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs -f -t --tail 10 cb6d7fbc3f27")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:11.293765084Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:12.297675608Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:13.301845582Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:14.304800996Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:15.307130238Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:16.310574235Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:17.312946923Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:18.314841295Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:19.317021705Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:20.319670013Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:21.322651649Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:22.325466918Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:23.327984704Z shenzai\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-06-17T12:02:24.329656919Z shenzai\n\n")])])]),a("h4",{attrs:{id:"查看正在运行的容器信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看正在运行的容器信息"}},[s._v("#")]),s._v(" 查看正在运行的容器信息")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect cb6d7fbc3f27")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器的完整id")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388"')]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建时间")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-06-17T12:00:50.706906186Z"')]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 脚本位置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行的脚本")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Args"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"while true;do echo shenzai;sleep 1;done"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"State"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Status"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"running"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 状态，正在运行")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Paused"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Restarting"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OOMKilled"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Dead"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Pid"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1909")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 父进程id")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExitCode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StartedAt"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-06-17T12:00:51.093617477Z"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FinishedAt"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0001-01-01T00:00:00Z"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 来源镜像")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:831691599b88ad6cc2a4abbd0e89661a121aff14cfa289ad840fd3946f274f1f"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ResolvConfPath"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/resolv.conf"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostnamePath"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hostname"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostsPath"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/hosts"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LogPath"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/containers/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388/cb6d7fbc3f27a064137d58282de97b97365dea2705211ebfbad642079cc1b388-json.log"')]),s._v(",\n        \n        \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dreamy_almeida"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RestartCount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Driver"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay2"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Platform"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MountLabel"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ProcessLabel"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AppArmorProfile"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExecIDs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 主机配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HostConfig"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Binds"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ContainerIDFile"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LogConfig"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"json-file"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PortBindings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RestartPolicy"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MaximumRetryCount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AutoRemove"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VolumeDriver"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VolumesFrom"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CapAdd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CapDrop"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Capabilities"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Dns"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DnsOptions"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DnsSearch"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExtraHosts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GroupAdd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IpcMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"private"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cgroup"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OomScoreAdj"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PidMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Privileged"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PublishAllPorts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadonlyRootfs"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecurityOpt"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTSMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UsernsMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ShmSize"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("67108864")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Runtime"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"runc"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ConsoleSize"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Isolation"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuShares"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Memory"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NanoCpus"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CgroupParent"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioWeight"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioWeightDevice"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioDeviceReadBps"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioDeviceWriteBps"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioDeviceReadIOps"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlkioDeviceWriteIOps"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuPeriod"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuQuota"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuRealtimePeriod"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuRealtimeRuntime"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpusetCpus"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpusetMems"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Devices"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DeviceCgroupRules"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DeviceRequests"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KernelMemory"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"KernelMemoryTCP"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MemoryReservation"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MemorySwap"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MemorySwappiness"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OomKillDisable"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PidsLimit"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ulimits"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuCount"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CpuPercent"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IOMaximumIOps"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IOMaximumBandwidth"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MaskedPaths"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/asound"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/acpi"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/kcore"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/keys"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/latency_stats"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/timer_list"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/timer_stats"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/sched_debug"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/scsi"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/sys/firmware"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ReadonlyPaths"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/bus"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/fs"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/irq"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/sys"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/proc/sysrq-trigger"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 其他配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GraphDriver"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Data"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LowerDir"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907-init/diff:/var/lib/docker/overlay2/7f79322e0f58d651a84a555dadd83d92537788172525945d3f538dd95dce336c/diff"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MergedDir"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/merged"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UpperDir"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/diff"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkDir"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/3675586ebbd79cd72d2562a90c9380627a331c563724c0dac091f92600af4907/work"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay2"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mounts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载")]),s._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基本配置")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hostname"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cb6d7fbc3f27"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Domainname"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdin"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdout"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStderr"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tty"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStdin"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StdinOnce"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Env"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基本环境变量，这里没有Java")]),s._v("\n            \n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基本命令")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"while true;do echo shenzai;sleep 1;done"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkingDir"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Entrypoint"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OnBuild"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.label-schema.build-date"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"20200611"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.label-schema.license"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GPLv2"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.label-schema.name"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS Base Image"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.label-schema.schema-version"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(",\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.label-schema.vendor"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 网卡，比如现在用的是桥接的网卡")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkSettings"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Bridge"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SandboxID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4d701985d7e77aa153790b697b2f38a61e20555c224b7675e4bf650b82799882"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"HairpinMode"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LinkLocalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Ports"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SandboxKey"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/docker/netns/4d701985d7e7"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPAddresses"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPv6Addresses"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.1"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.3"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:03"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Networks"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bridge"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Links"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Aliases"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NetworkID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"22b0fd2290ccbc4e066a75d3f01bd8bf32ee4352c5bbcfc9f911287219219571"')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"EndpointID"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8a6c71e2bafb19ca7dfd85445ccc4bef6d17467360a243d624089e676a24a018"')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.1"')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.3"')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPPrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPv6Gateway"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6Address"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GlobalIPv6PrefixLen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MacAddress"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"02:42:ac:11:00:03"')]),s._v(",\n                    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DriverOpts"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止正在疯狂输出的那个容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker stop cb6d7fbc3f27")]),s._v("\ncb6d7fbc3f27\n")])])]),a("h4",{attrs:{id:"进入当前正在运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入当前正在运行的容器"}},[s._v("#")]),s._v(" 进入当前正在运行的容器")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们通常容器都是使用后台方式运行的e")]),s._v("\n\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it 容器id bashbash\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\nc2887d35c71d        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(" minutes                           vigorous_kare\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it c2887d35c71d /bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin  etc   lib\t  lost+found  mnt  proc  run   srv  tmp  var\ndev  home  lib64  media       opt  root  sbin  sys  usr\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),s._v("         PID   "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PPID")]),s._v("  C STIME TTY          TIME CMD\nroot          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(":57 pts/0    00:00:00 /bin/bash\nroot         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":32 pts/1    00:00:00 /bin/bash\nroot         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":32 pts/1    00:00:00 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# c2887d35c71d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式二")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach c2887d35c71d")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@c2887d35c71d /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 区别")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec # 进入容器后开启一个新的终端，可以在里面操作(常用)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach 进入容器正在执行的终端，不会启动新的进程")]),s._v("\n\n")])])]),a("h4",{attrs:{id:"从容器内拷贝文件到主机上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从容器内拷贝文件到主机上"}},[s._v("#")]),s._v(" 从容器内拷贝文件到主机上")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ctrl P Q 不关闭退出，查看")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@0569081aa89c /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# [root@192 ~]# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n0569081aa89c        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" seconds ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" seconds    \nhopeful_chebyshev\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看主机home下无文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入正在运行的容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach 0569081aa89c")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器home目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@0569081aa89c /"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /home")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在目录中创建java文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@0569081aa89c home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test.java")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出并停止容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@0569081aa89c home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看现在运行的容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器虽然被停止，但是数据都会保留")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS               NAMES\n0569081aa89c        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" minutes ago       Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" seconds ago                           hopeful_chebyshev\nf589e5684a01        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" minutes ago                          cranky_easley\ncb6d7fbc3f27        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh -c \'while t…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("137")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(" minutes ago                        dreamy_almeida\nc2887d35c71d        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58")]),s._v(" minutes ago      Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" minutes ago                        vigorous_kare\n8ce188e5fee3        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              About an hour ago   Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" About an hour ago                       tender_dirac\n7b1a7dd10ea4        centos              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" hours ago         Exited "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" hours ago                             fervent_mirzakhani\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器数据拷贝到主机")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp 0569081aa89c:/home/test.java /home")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ntest.java\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝是一个手动过程，未来我们使用 -v 卷的技术，可以实现自动同步 /home /home")]),s._v("\n")])])]),a("h4",{attrs:{id:"查看内容占用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看内容占用"}},[s._v("#")]),s._v(" 查看内容占用")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker stats\n\n")])])]),a("h4",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617210554147.png",alt:"image-20200617210554147"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker --help")]),s._v("\n\nUsage:\tdocker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" COMMAND\n\nA self-sufficient runtime "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" containers\n\nOptions:\n      --config string      Location of client config\n                           files "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/.docker"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -c, --context string     Name of the context to use to\n                           connect to the daemon\n                           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("overrides DOCKER_HOST "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" var\n                           and default context "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" with\n                           "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker context use"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -D, --debug              Enable debug mode\n  -H, --host list          Daemon socket"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to connect to\n  -l, --log-level string   Set the logging level\n                           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"debug"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"warn"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"error"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fatal"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"info"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --tls                Use TLS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" implied by --tlsverify\n      --tlscacert string   Trust certs signed only by\n                           this CA "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default\n                           "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/.docker/ca.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --tlscert string     Path to TLS certificate "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n                           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/.docker/cert.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --tlskey string      Path to TLS key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default\n                           "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/.docker/key.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --tlsverify          Use TLS and verify the remote\n  -v, --version            Print version information and quit\n\nManagement Commands:\n  builder     Manage builds\n  config      Manage Docker configs\n  container   Manage containers\n  context     Manage contexts\n  engine      Manage the docker engine\n  image       Manage images\n  network     Manage networks\n  node        Manage Swarm nodes\n  plugin      Manage plugins\n  secret      Manage Docker secrets\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("     Manage services\n  stack       Manage Docker stacks\n  swarm       Manage Swarm\n  system      Manage Docker\n  trust       Manage trust on Docker images\n  volume      Manage volumes\n\nCommands:\n  attach      Attach "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" standard input, output, and error streams to a running container\n  build       Build an image from a Dockerfile\n  commit      Create a new image from a container"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s changes\n  cp          Copy files/folders between a container and the local filesystem\n  create      Create a new container\n  diff        Inspect changes to files or directories on a container'")]),s._v("s filesystem\n  events      Get real "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" events from the server\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("        Run a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a running container\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v("      Export a container's filesystem as a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v("     Show the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" of an image\n  images      List images\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("      Import the contents from a tarball to create a filesystem image\n  info        Display system-wide information\n  inspect     Return low-level information on Docker objects\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("        Kill one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" running containers\n  load        Load an image from a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive or STDIN\n  login       Log "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" to a Docker registry\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v("      Log out from a Docker registry\n  logs        Fetch the logs of a container\n  pause       Pause all processes within one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers\n  port        List port mappings or a specific mapping "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the container\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("          List containers\n  pull        Pull an image or a repository from a registry\n  push        Push an image or a repository to a registry\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),s._v("      Rename a container\n  restart     Restart one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("          Remove one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers\n  rmi         Remove one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images\n  run         Run a "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" a new container\n  save        Save one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" images to a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" archive "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("streamed to STDOUT by default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  search      Search the Docker Hub "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" images\n  start       Start one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" stopped containers\n  stats       Display a live stream of container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" resource usage statistics\n  stop        Stop one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" running containers\n  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("         Display the running processes of a container\n  unpause     Unpause all processes within one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers\n  update      Update configuration of one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers\n  version     Show the Docker version information\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("        Block "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" one or "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" containers stop, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" print their "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" codes\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617210932306.png",alt:"image-20200617210932306"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617211021003.png",alt:"image-20200617211021003"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617211039508.png",alt:"image-20200617211039508"}})]),s._v(" "),a("h4",{attrs:{id:"作业练习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#作业练习"}},[s._v("#")]),s._v(" 作业练习")]),s._v(" "),a("h5",{attrs:{id:"部署nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署nginx"}},[s._v("#")]),s._v(" 部署Nginx")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618100621199.png",alt:"image-20200618100621199"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网搜索nginx，可以看到帮助文档")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull nginx")]),s._v("\nUsing default tag: latest\nlatest: Pulling from library/nginx\n8559a31e96f4: Pull complete \n8d69e59170f7: Pull complete \n3f9f1ec1d262: Pull complete \nd1f5ff4f210d: Pull complete \n1e22bfa8652e: Pull complete \nDigest: sha256:21f32f6c08406306d822a0e6e8b7dc81f53f336570e852e25fbe1e3e3d0d0133\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" nginx:latest\ndocker.io/library/nginx:latest\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ncentos              latest              831691599b88        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" hours ago        215MB\nnginx               latest              2622e6cca7eb        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" days ago          132MB\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行测试")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 后台运行，--name 命名，-p 暴露端口，3344服务器、宿主机的端口，容器内部端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name nginx01 -p:3344:80 nginx")]),s._v("\n38dbf7bdcaef232d269b7184d91e44e06087181b5ee929494e177ad526810fa8\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n38dbf7bdcaef        nginx               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" seconds ago       Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3344-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp   nginx01\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用3344可以访问成功")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# curl localhost:3344")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("DOCTYPE html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("head"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Welcome to nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/title"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    body "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        width: 35em"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        margin: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" auto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        font-family: Tahoma, Verdana, Arial, sans-serif"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/style"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/head"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("Welcome to nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("For online documentation and support please refer to\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://nginx.org/"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("nginx.org"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("br/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nCommercial support is available at\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://nginx.com/"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("nginx.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("em"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Thank you "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" using nginx."),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/em"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n")])])]),a("p",[s._v("端口暴露")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617212310709.png",alt:"image-20200617212310709"}})]),s._v(" "),a("p",[s._v("可以公网访问")]),s._v(" "),a("p",[s._v("找到服务器地址")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617213213721.png",alt:"image-20200617213213721"}})]),s._v(" "),a("p",[s._v("浏览器输入 192.168.147.132:3344/")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200617213142079.png",alt:"image-20200617213142079"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n38dbf7bdcaef        nginx               "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" minutes ago      Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" minutes       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3344-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp   nginx01\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it nginx01 /bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查一下nginx在哪")]),s._v("\nroot@38dbf7bdcaef:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whereis nginx")]),s._v("\nnginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 到这个目录")]),s._v("\nroot@38dbf7bdcaef:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/nginx")]),s._v("\nroot@38dbf7bdcaef:/etc/nginx"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nconf.d\t\tkoi-utf  mime.types  nginx.conf   uwsgi_params\nfastcgi_params\tkoi-win  modules     scgi_params  win-utf\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出")]),s._v("\nroot@38dbf7bdcaef:/etc/nginx"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@192 home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker stop 38dbf7bdcaef")]),s._v("\n38dbf7bdcaef\n\n\n")])])]),a("p",[s._v("再次刷新网页，服务关闭")]),s._v(" "),a("p",[s._v("思考问题：每次改动nginx配置文件，都需要进入容器内部，十分麻烦，要是可以在容器外部提供一个映射路径，达到在容器修改文件名，容器内部就可以自动修改？-v 数据卷技术！")]),s._v(" "),a("h5",{attrs:{id:"部署tomcat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署tomcat"}},[s._v("#")]),s._v(" 部署tomcat")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618100551587.png",alt:"image-20200618100551587"}})]),s._v(" "),a("p",[s._v("在docker hub上查看版本号和使用方法")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618100319796.png",alt:"image-20200618100319796"}})]),s._v(" "),a("p",[s._v("官方文档一定要翻烂，超多版本，我的天呐~")]),s._v(" "),a("h6",{attrs:{id:"官方方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官方方法"}},[s._v("#")]),s._v(" 官方方法")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it --rm tomcat:9.0\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run 可以不用pull，能自动下载")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -it 直接进去运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --rm 是什么意思？入门的意思？")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们之前的启动都是后台，停止了容器之后，容器还是可以查到")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 写了--rm，类似阅后即焚模式，用完即删除，这种通常用来测试")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后冒号查好的版本号")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618101811914.png",alt:"image-20200618101811914"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618101849917.png",alt:"image-20200618101849917"}})]),s._v(" "),a("p",[s._v("ctrl+c退出")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618102022167.png",alt:"image-20200618102022167"}})]),s._v(" "),a("p",[s._v("可以看到并没有tomcat，印证阅后即焚模式，容器会删除，镜像不会删除")]),s._v(" "),a("p",[s._v("平时不建议这样搞")]),s._v(" "),a("h6",{attrs:{id:"正常方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正常方法"}},[s._v("#")]),s._v(" 正常方法")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker pull tomcat:9.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之前下过了，应该不用下了，这里老师讲错了")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618102544564.png",alt:"image-20200618102544564"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动运行，应该加上版本号")]),s._v("\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3355")]),s._v(":8080 --name tomcat01 tomcat\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618102837397.png",alt:"image-20200618102837397"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it tomcat01 /bin/bash\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618103109004.png",alt:"image-20200618103109004"}})]),s._v(" "),a("p",[s._v("发现问题")]),s._v(" "),a("ol",[a("li",[s._v("linux命令少了")]),s._v(" "),a("li",[s._v("没有webapps")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618103407205.png",alt:"image-20200618103407205"}})]),s._v(" "),a("p",[s._v("这是阿里云镜像的原因：默认使用最小镜像，所有不必要的都剔除了，保证最小可运行环境")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618103848104.png",alt:"image-20200618103848104"}})]),s._v(" "),a("p",[s._v("再次找到结构")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618104052242.png",alt:"image-20200618104052242"}})]),s._v(" "),a("p",[s._v("在浏览器中输入：http://192.168.147.132:3355/")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618103958168.png",alt:"image-20200618103958168"}})]),s._v(" "),a("p",[s._v("思考问题：我们以后部署项目，如果每次都要进入容器是不是身份麻烦？我要是可以在容器外部提供一个映射路径，webapps，我们在外部放置项目，就自动同步到内部就好了！")]),s._v(" "),a("p",[s._v("docker容器 tomcat+网站")]),s._v(" "),a("p",[s._v("docker mysql")]),s._v(" "),a("h5",{attrs:{id:"部署es-kibana"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署es-kibana"}},[s._v("#")]),s._v(" 部署es+kibana")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618104950722.png",alt:"image-20200618104950722"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es 暴露的端口很多")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es 十分耗内存")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es 的数据一般需要放置到安全目录！挂载")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 elasticsearch")]),s._v("\n$ docker run -d --name elasticsearch01 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" elasticsearch:7.6.2\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看内存占用情况")]),s._v("\ndocker stats\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618111713885.png",alt:"image-20200618111713885"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先感觉stop一下")]),s._v("\ndocker stop ba18713ca536\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618105057785.png",alt:"image-20200618105057785"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过 -e 限制内存")]),s._v("\n$ docker run -d --name elasticsearch02 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("“-Xms64m -Xmx512m” elasticsearch:7.6.2\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618113018622.png",alt:"image-20200618113018622"}})]),s._v(" "),a("p",[s._v("没成功啊，SEI能告诉我为啥！！")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -d --name elasticsearch02 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms64m -Xmx512m"')]),s._v(" elasticsearch:7.6.2\n")])])]),a("blockquote",[a("p",[s._v("py0003null大佬:\n“ES_JAVA_OPTS=-Xms64m -Xmx512m”")]),s._v(" "),a("p",[s._v("py0003null大佬:\n引号提前试试")])]),s._v(" "),a("p",[s._v("原因是引号！！你没觉得怪怪的嘛")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618115302656.png",alt:"image-20200618115302656"}})]),s._v(" "),a("p",[s._v("此时查看stats，发现内存占用在控制范围内")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618115149971.png",alt:"image-20200618115149971"}})]),s._v(" "),a("p",[s._v("ctrl + C退出，记得stop")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618115921069.png",alt:"image-20200618115921069"}})]),s._v(" "),a("h5",{attrs:{id:"思考-用kibana链接elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思考-用kibana链接elasticsearch"}},[s._v("#")]),s._v(" 思考：用kibana链接elasticsearch")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618113556445.png",alt:"image-20200618113556445"}})]),s._v(" "),a("h3",{attrs:{id:"可视化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可视化"}},[s._v("#")]),s._v(" 可视化")]),s._v(" "),a("ul",[a("li",[s._v("portainer(先用这个)")]),s._v(" "),a("li",[s._v("Rancher(CI/CD时用)")])]),s._v(" "),a("h4",{attrs:{id:"portainer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#portainer"}},[s._v("#")]),s._v(" portainer")]),s._v(" "),a("p",[s._v("Docker图像化界面管理工具，提供一个后台面板供我们操作！")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v(":9000 --restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always -v /var/run/docker.sock:/var/run/docker --privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true portainer/portainer\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618114542622.png",alt:"image-20200618114542622"}})]),s._v(" "),a("p",[s._v("访问外网8088")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618114902169.png",alt:"image-20200618114902169"}})]),s._v(" "),a("p",[s._v("用户名")]),s._v(" "),a("p",[s._v("密码")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618134706491.png",alt:"image-20200618134706491"}})]),s._v(" "),a("p",[s._v("【中午吃饭重连了一下，失败，不知道发生了啥】")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618135424706.png",alt:"image-20200618135424706"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618135450037.png",alt:"image-20200618135450037"}})]),s._v(" "),a("p",[s._v("【平时不会用这个，好吧，先往下】")]),s._v(" "),a("h3",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),a("h2",{attrs:{id:"docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像"}},[s._v("#")]),s._v(" Docker镜像")]),s._v(" "),a("h3",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("p",[s._v("UnionFS 联合文件系统")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618140242423.png",alt:"image-20200618140242423"}})]),s._v(" "),a("p",[s._v("bootfs：boot file system")]),s._v(" "),a("p",[s._v("rootfs：root file system")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618140907894.png",alt:"image-20200618140907894"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618140932621.png",alt:"image-20200618140932621"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618141014511.png",alt:"image-20200618141014511"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618153329894.png",alt:"image-20200618153329894"}})]),s._v(" "),a("p",[s._v("Docker镜像都是只读的，当容器启动时，一个新的可写层被加到镜像的顶部，这一层就是我们通常说的容器层，容器层之下的都叫镜像层")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618153855605.png",alt:"image-20200618153855605"}})]),s._v(" "),a("h3",{attrs:{id:"commit提交镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit提交镜像"}},[s._v("#")]),s._v(" commit提交镜像")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker commit "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提交容器成为一个新的副本")]),s._v("\ndocker commit -m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"提交的描述信息"')]),s._v(" -a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"作者"')]),s._v(" 容器id 目标镜像名："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker images\ndocker run -it -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 tomcat\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618154457286.png",alt:"image-20200618154457286"}})]),s._v(" "),a("p",[s._v("这是一个前台程序")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618154736475.png",alt:"image-20200618154736475"}})]),s._v(" "),a("p",[s._v("将webapps.dist里面所有的文件拷贝到webapps里面，其中-r必须有，表示目录递归拷贝")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618154943194.png",alt:"image-20200618154943194"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618155750591.png",alt:"image-20200618155750591"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker commit -a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"paidaxing"')]),s._v(" -m"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add webapps app"')]),s._v(" 当前容器的id tomcat02:1.0\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618160425265.png",alt:"image-20200618160425265"}})]),s._v(" "),a("p",[s._v("发现新的版本，比之前的大了一些，因为里面记录了我们的改动")]),s._v(" "),a("blockquote",[a("p",[s._v("如果想保存当前容器的状态，可以通过commit提交，获得一个镜像")]),s._v(" "),a("p",[s._v("好比我们以前学习VM的时候的快照")]),s._v(" "),a("p",[s._v("到这里算是入门了")]),s._v(" "),a("p",[s._v("接下来三个部分是docker的精髓")])]),s._v(" "),a("h2",{attrs:{id:"容器数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器数据卷"}},[s._v("#")]),s._v(" 容器数据卷")]),s._v(" "),a("h3",{attrs:{id:"什么是容器卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是容器卷"}},[s._v("#")]),s._v(" 什么是容器卷")]),s._v(" "),a("p",[s._v("docker是要将应用和环境打包成一个镜像")]),s._v(" "),a("p",[s._v("这样，数据就不应该在容器中，否则容器删除，数据就会丢失，这就是删库跑路")]),s._v(" "),a("p",[s._v("故容器之间要有一个数据共享技术")]),s._v(" "),a("p",[s._v("在Docker容器中产生的数据，同步到本地，这就是卷技术")]),s._v(" "),a("p",[s._v("本质上是一个目录挂载，将容器内的目录挂载到虚拟机上")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618162917672.png",alt:"image-20200618162917672"}})]),s._v(" "),a("p",[s._v("目的：容器的持久化和同步操作")]),s._v(" "),a("p",[s._v("容器间可以数据共享")]),s._v(" "),a("h3",{attrs:{id:"使用数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用数据卷"}},[s._v("#")]),s._v(" 使用数据卷")]),s._v(" "),a("p",[s._v("方式一：直接使用命令来挂载")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it -v -p\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -it 交互式进入")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -v volume卷技术")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -p 主机端口")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618163659503.png",alt:"image-20200618163659503"}})]),s._v(" "),a("p",[s._v("新开一个窗口")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker inspect 容器id\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618163938466.png",alt:"image-20200618163938466"}})]),s._v(" "),a("p",[s._v("找到挂载信息Mounts")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618164148642.png",alt:"image-20200618164148642"}})]),s._v(" "),a("p",[s._v("测试")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618164818624.png",alt:"image-20200618164818624"}})]),s._v(" "),a("p",[s._v("容器停止后，修改主机文件，再启动容器的时候，数据同样改变")]),s._v(" "),a("p",[s._v("双向同步")]),s._v(" "),a("h3",{attrs:{id:"实战安装mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实战安装mysql"}},[s._v("#")]),s._v(" 实战安装mysql")]),s._v(" "),a("p",[s._v("MySQL的数据持久化命令")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker search mysql\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取")]),s._v("\ndocker pull mysql:5.7\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载")]),s._v("\ndocker run -d -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3310")]),s._v(":3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" --name mysql01 mysql5.7\n\n-d 后台运行\n-p 端口映射\n-v 卷挂载\n-e 环境配置 安装启动mysql需要配置密码\n--name 容器名字\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618171353336.png",alt:"image-20200618171353336"}})]),s._v(" "),a("p",[s._v("链接测试：打开SQLyog")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618173234347.png",alt:"image-20200618173234347"}})]),s._v(" "),a("p",[s._v("点 测试链接")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618173300551.png",alt:"image-20200618173300551"}})]),s._v(" "),a("p",[s._v("点 链接")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618173729692.png",alt:"image-20200618173729692"}})]),s._v(" "),a("h3",{attrs:{id:"具名和匿名挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具名和匿名挂载"}},[s._v("#")]),s._v(" 具名和匿名挂载")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618203452205.png",alt:"image-20200618203452205"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618203744983.png",alt:"image-20200618203744983"}})]),s._v(" "),a("h3",{attrs:{id:"-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[s._v("#")])]),s._v(" "),a("p",[s._v("DockerFile使用来构建docker镜像的文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618211547398.png",alt:"image-20200618211547398"}})]),s._v(" "),a("blockquote",[a("p",[s._v("kas:\n没有安装吧？")]),s._v(" "),a("p",[s._v("kas:\n安装一下就可以了")]),s._v(" "),a("p",[s._v("py9001021曾叙坚:\ncentos 默认使用vi写内容，vim需要下载")]),s._v(" "),a("p",[s._v("py9001021曾叙坚:\n是的，需要下载vim才能使用")]),s._v(" "),a("p",[s._v("YF:\n配置可以改下，字体就很炫酷了")]),s._v(" "),a("p",[s._v("都建民:\n用vi  试试")]),s._v(" "),a("p",[s._v("都建民:\n你没有安装vim")]),s._v(" "),a("p",[s._v("都建民:\nyum install vim")]),s._v(" "),a("p",[s._v("都建民:\n试试这个命令")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑文件的，没有装一下")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618211516566.png",alt:"image-20200618211516566"}})]),s._v(" "),a("p",[s._v("安装完之后就可以运行这个命令了")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618211803012.png",alt:"image-20200618211803012"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像是一层一层的，脚本是一行一行的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指令都是大写的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里的每个命令可以理解为镜像的一层")]),s._v("\n\nFROM centos\n\nVOLUME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"volume01"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"volume02"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再创建镜像的时候就挂载出来")]),s._v("\n\nCMD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"---end---"')]),s._v("\nCMD /bin/bash\n\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618211023834.png",alt:"image-20200618211023834"}})]),s._v(" "),a("p",[s._v("想保存并退出")]),s._v(" "),a("blockquote",[a("p",[s._v("Wesley.:\nshift  加  冒号")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618211318410.png",alt:"image-20200618211318410"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" dockerfile1\n\ndocker build -f dockerfile1 -t padaxing/centos:1.0 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后的点很重要 镜像名不能有/")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618212936481.png",alt:"image-20200618212936481"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker images\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618213310752.png",alt:"image-20200618213310752"}})]),s._v(" "),a("p",[s._v("启动生成的镜像")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618220658979.png",alt:"image-20200618220658979"}})]),s._v(" "),a("p",[s._v("在容器内部创建一个文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618221801103.png",alt:"image-20200618221801103"}})]),s._v(" "),a("p",[s._v("查看Mounts，Source对应容器外目录，匿名挂载卷")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618221837895.png",alt:"image-20200618221837895"}})]),s._v(" "),a("p",[s._v("测试一下，在container volume01下生成文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200618222224352.png",alt:"image-20200618222224352"}})]),s._v(" "),a("p",[s._v("在主机挂载路径下，也同样生成")]),s._v(" "),a("h3",{attrs:{id:"多个容器数据共享"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多个容器数据共享"}},[s._v("#")]),s._v(" 多个容器数据共享")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621165403842.png",alt:"image-20200621165403842"}})]),s._v(" "),a("p",[s._v("看一下有啥images")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621165733780.png",alt:"image-20200621165733780"}})]),s._v(" "),a("p",[s._v("启动docker01，用之前建的padaxing/centos 1.0  镜像")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it --name docker01 padaxing/centos:1.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.0必须写")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621170429658.png",alt:"image-20200621170429658"}})]),s._v(" "),a("p",[s._v("当前这个ctrl+p+q不停止退出")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621170540593.png",alt:"image-20200621170540593"}})]),s._v(" "),a("p",[s._v("依次启动docker02、docker03")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it --name docker02 --volumes-from docker01 padaxing/centos:1.0\n")])])]),a("p",[s._v("docker02继承docker01的volumes")]),s._v(" "),a("p",[s._v("可以验证，在docker01下加一个数据，在docker02下也会出现")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621171513650.png",alt:"image-20200621171513650"}})]),s._v(" "),a("p",[s._v("创建docker03，同样继承docker01")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it --name docker03 --volumes-from docker01 padaxing/centos:1.0\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621172333639.png",alt:"image-20200621172333639"}})]),s._v(" "),a("p",[s._v("在docker03的volume01下建立文件，在docker01的volume01下同样也有")]),s._v(" "),a("p",[s._v("即通过--volumes-from 可以实现不同容器间的数据共享")]),s._v(" "),a("p",[s._v("删除docker01，数据还在")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f \n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621172830779.png",alt:"image-20200621172830779"}})]),s._v(" "),a("p",[s._v("可以看到，删除docker01，进入docker02，数据依然在")]),s._v(" "),a("p",[s._v("结论：")]),s._v(" "),a("p",[s._v("容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用位置")]),s._v(" "),a("p",[s._v("但是如果持久化到了本地，即使所有容器删除了，本地数据是不会删除的")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" DockerFile")]),s._v(" "),a("p",[s._v("是用来构建docker镜像的文件，可以理解为命令参数脚本")]),s._v(" "),a("p",[s._v("构建步骤：")]),s._v(" "),a("ol",[a("li",[s._v("编写一个dockerfile文件")]),s._v(" "),a("li",[s._v("docker build 构建成为一个镜像")]),s._v(" "),a("li",[s._v("docker run运行镜像")]),s._v(" "),a("li",[s._v("docker push 发布镜像（DockerHub、阿里云镜像仓库 私有/共有）")])]),s._v(" "),a("p",[s._v("这个写一个项目时一样的")]),s._v(" "),a("h3",{attrs:{id:"官方dockerfile示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官方dockerfile示例"}},[s._v("#")]),s._v(" 官方DockerFile示例")]),s._v(" "),a("p",[s._v("看一下官方的DockerFile")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621174204807.png",alt:"image-20200621174204807"}})]),s._v(" "),a("p",[s._v("可以看到官方镜像都是基础包，很多功能没有，我们通常会自己搭建自己的镜像")]),s._v(" "),a("p",[s._v("官方既然可以制作镜像，我们亦可以")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"dockerfile基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile基础知识"}},[s._v("#")]),s._v(" DockerFile基础知识")]),s._v(" "),a("ol",[a("li",[s._v("每个指令都必须是大写字母")]),s._v(" "),a("li",[s._v("按照从上到下顺序执行")]),s._v(" "),a("li",[s._v("*#*表示注释")]),s._v(" "),a("li",[s._v("每一个指令都会创建体检一个新的镜像层，并提交")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621174948310.png",alt:"image-20200621174948310"}})]),s._v(" "),a("p",[s._v("docker是面向开发的，我们以后要发布项目，做镜像，就要编写dockerfile文件，这个文件十分简单！")]),s._v(" "),a("p",[s._v("Docker镜像逐渐成为企业的交付标准，必须掌握！")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"dockerfile命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile命令"}},[s._v("#")]),s._v(" DockerFile命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://www.yunweipai.com/wp-content/uploads/2016/09/171.jpg",alt:"æ¥çæºå¾å"}})]),s._v(" "),a("h3",{attrs:{id:"-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("FROM "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础镜像 比如centos")]),s._v("\nMAINTAINER "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像是谁写的 姓名+邮箱")]),s._v("\nRUN "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像构建时需要运行的命令")]),s._v("\nADD "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加，比如添加一个tomcat压缩包")]),s._v("\nWORKDIR "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的工作目录")]),s._v("\nVOLUME "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载的目录")]),s._v("\nEXPOSE "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定暴露端口，跟-p一个道理")]),s._v("\nRUN "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最终要运行的")]),s._v("\nCMD "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令，只有最后一个会生效，而且可被替代")]),s._v("\nENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令，可以追加命令")]),s._v("\nONBUILD "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当构建一个被继承Dockerfile 这个时候运行ONBUILD指定，触发指令")]),s._v("\nCOPY "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将文件拷贝到镜像中")]),s._v("\nENV "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建的时候设置环境变量")]),s._v("\n")])])]),a("h3",{attrs:{id:"实战构建自己的centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实战构建自己的centos"}},[s._v("#")]),s._v(" 实战构建自己的centos")]),s._v(" "),a("p",[s._v("Docker Hub中99%的镜像都是从FROM scratch开始的")]),s._v(" "),a("p",[s._v("添加centos7的压缩包")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个自己的centos")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入home目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /home\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个目录，之后的东西都保存到这里")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" dockerfile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入这个目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" dockerfile/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个dockerfile，名字叫mydockerfile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mydockerfile-centos\n\n\n")])])]),a("p",[s._v("xbash新开一个界面")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官方默认centos")]),s._v("\ndocker run -it centos\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官方默认有pwd命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官方默认没有vim命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官方默认没有ifconfig命令")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621184333206.png",alt:"image-20200621184333206"}})]),s._v(" "),a("p",[s._v("回到mydockerfile")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621184847524.png",alt:"image-20200621184847524"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下面给官方centos加上自定义的内容")]),s._v("\nFROM centos\nMAINTAINER padaxing"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("010301200@hai.com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nENV MYPATH /usr/local\nWORKDIR "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MYPATH")]),s._v("\n\nRUN yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\nRUN yum -y "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" net-tools\n\nEXPOSE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\nCMD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MYPATH")]),s._v("\nCMD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"---end---"')]),s._v("\nCMD /bin/bash\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621185539523.png",alt:"image-20200621185539523"}})]),s._v(" "),a("p",[s._v("ESC, shif + : 输入wq保存并退出")]),s._v(" "),a("p",[s._v("如果写错了需要修改、")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mydockerfile-centos\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入之后按i或者INSERT键即可修改")]),s._v("\n")])])]),a("p",[s._v("下面通过这个这个文件创建镜像")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker build -f dockerfile-centos -t mycentos:0.1 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621190219978.png",alt:"image-20200621190219978"}})]),s._v(" "),a("p",[s._v("依次执行命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621190439448.png",alt:"image-20200621190439448"}})]),s._v(" "),a("p",[s._v("最终返回Successfully表示成功")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621190524848.png",alt:"image-20200621190524848"}})]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("docker run -it mycentos:0.1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 版本号必须写，不然他会去找最新的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621190812481.png",alt:"image-20200621190812481"}})]),s._v(" "),a("p",[s._v("这时可以看到这些功能都有了")]),s._v(" "),a("p",[s._v("可以通过查看docker构建历史")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200621192103460.png",alt:"image-20200621192103460"}})]),s._v(" "),a("p",[s._v("可以看到当前这个镜像是怎么一步一步构建起来的")]),s._v(" "),a("p",[s._v("我们平时拿到一个镜像也可以通过这个方法研究一下他是怎么做的")]),s._v(" "),a("h3",{attrs:{id:"cmd与entrypoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd与entrypoint"}},[s._v("#")]),s._v(" CMD与ENTRYPOINT")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\nFROM centos\nCMD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动centos展示目录")]),s._v("\n")])])]),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200622075427103.png",alt:"image-20200622075427103"}})]),s._v(" "),a("p",[s._v("测试ENTRYPOINT")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200622075653789.png",alt:"image-20200622075653789"}})]),s._v(" "),a("p",[s._v("run的时候可以直接加命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/img/Docker/image-20200622075802180.png",alt:"image-20200622075802180"}})]),s._v(" "),a("p",[s._v("Docker中许多命令都十分相似，我们需要了解他们的区别，最好的方式就是这样对比测试")]),s._v(" "),a("hr")])}),[],!1,null,null,null);t.default=e.exports}}]);