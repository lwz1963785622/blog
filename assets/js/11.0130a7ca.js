(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{545:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"history-对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-对象"}},[t._v("#")]),t._v(" history 对象")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("history")]),t._v(" 对象是 "),a("code",[t._v("windows")]),t._v("子对象。"),a("code",[t._v("history")]),t._v(" 接口允许操作浏览器的曾经在标签页或者框架里访问的历史记录,这些方法和事件能够帮助我们优雅的实现单页面应用，同时又不会影响搜索引擎对我们网站的搜录。现在所有的现代浏览器都已经支持这些新的特性，并且涌现出大量的路由框架，都内置集成了这些新的特性。比方说著名的"),a("code",[t._v("vue")]),t._v("框架里面的 "),a("code",[t._v("vue-route")]),t._v("等路由框架。")])]),t._v(" "),a("h3",{attrs:{id:"history-对象属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-对象属性"}},[t._v("#")]),t._v(" history 对象属性")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("可读写性")]),t._v(" "),a("th",[t._v("兼容性")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("length")]),t._v(" "),a("td",[t._v("包含当前页面在内的历史记录个数")]),t._v(" "),a("td",[t._v("只读")]),t._v(" "),a("td",[t._v("全部")])])])]),t._v(" "),a("h3",{attrs:{id:"history-对象方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history-对象方法"}},[t._v("#")]),t._v(" history 对象方法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("返回值")]),t._v(" "),a("th",[t._v("功能")]),t._v(" "),a("th",[t._v("兼容性")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("back")]),t._v(" "),a("td",[t._v("无")]),t._v(" "),a("td",[t._v("undefined")]),t._v(" "),a("td",[t._v("加载 history 列表中的前一个 URL(等价于history.go(-1))")]),t._v(" "),a("td",[t._v("全部")])]),t._v(" "),a("tr",[a("td",[t._v("forward")]),t._v(" "),a("td",[t._v("无")]),t._v(" "),a("td",[t._v("undefined")]),t._v(" "),a("td",[t._v("加载 history 列表中的下一个 URL(等价于history.go(1))")]),t._v(" "),a("td",[t._v("全部")])]),t._v(" "),a("tr",[a("td",[t._v("go")]),t._v(" "),a("td",[t._v("number")]),t._v(" "),a("td",[t._v("undefined")]),t._v(" "),a("td",[t._v("通过当前页面的相对位置从浏览器历史记录加载页面")]),t._v(" "),a("td",[t._v("全部")])]),t._v(" "),a("tr",[a("td",[t._v("pushState")]),t._v(" "),a("td",[t._v("state, title, url")]),t._v(" "),a("td",[t._v("undefined")]),t._v(" "),a("td",[t._v("无刷新的向浏览器 历史最前方 加入一条记录")]),t._v(" "),a("td",[t._v(">ie9")])]),t._v(" "),a("tr",[a("td",[t._v("replaceState")]),t._v(" "),a("td",[t._v("state, title, url")]),t._v(" "),a("td",[t._v("undefined")]),t._v(" "),a("td",[t._v("无刷新的使用一条记录替换当前的历史记录")]),t._v(" "),a("td",[t._v(">ie9")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("history.go方法")]),t._v(" "),a("ul",[a("li",[t._v("history.go(-1)： 加载上一个历史记录")]),t._v(" "),a("li",[t._v("history.go(1)： 加载下一个历史记录")]),t._v(" "),a("li",[t._v("history.go(0) 或不传参： 刷新本页\n类似地，你可以传递参数值2并向前移动2个页面，等等。"),a("br"),t._v("\n如果已经没有页面，该方法不会报错，页面不会发生任何变化； 如果参数不是整数，页面也不会发生任何变化。")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("history.pushState")]),t._v(" 和 "),a("code",[t._v("history.replaceState")]),t._v("  方法有3个参数")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("状态对象state")]),t._v(" —— 需要保存的数据，这个数据在触发"),a("code",[t._v("popstate")]),t._v("事件时保存在"),a("code",[t._v("event.state")]),t._v("上")]),t._v(" "),a("li",[a("strong",[t._v("标题title")]),t._v(" —— 浏览器目前不识别该参数，传入一个空字符串")]),t._v(" "),a("li",[a("strong",[t._v("地址URL")]),t._v(" —— 需要更改的url地址")])])])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("window.onpopstate")]),t._v("事件： 浏览器点击前进后退(或者在js中调用"),a("code",[t._v("history.back()")]),t._v("、"),a("code",[t._v("history.forward()")]),t._v("、"),a("code",[t._v("history.go()")]),t._v("方法)时触发的事件。"),a("code",[t._v("event.state")]),t._v("可以获取当前"),a("code",[t._v("url")]),t._v("下设置的"),a("code",[t._v("state")]),t._v("。")])]),t._v(" "),a("p",[a("em",[t._v("注："),a("code",[t._v("pushState")]),t._v(" 和 "),a("code",[t._v("replaceState")]),t._v("方法只能加载同源下的资url源（存在跨域问题）")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onpopstate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"location: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", state: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//绑定事件处理函数.")]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" page"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?page=1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加并激活一个历史记录条目 http://example.com/example.html?page=1,条目索引为1")]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" page"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title 2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?page=2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加并激活一个历史记录条目 http://example.com/example.html?page=2,条目索引为2")]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" page"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title 3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?page=3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//修改当前激活的历史记录条目 http://ex..?page=2 变为 http://ex..?page=3,条目索引为3")]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("back")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 输出 "location: http://example.com/example.html?page=1, state: {"page":1}"')]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("back")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 输出 "location: http://example.com/example.html, state: null')]),t._v("\nhistory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 输出 "location: http://example.com/example.html?page=3, state: {"page":3}')]),t._v("\n")])])]),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("ul",[a("li",[t._v("js刷新本页面方法汇总：\n"),a("ol",[a("li",[t._v("history.go(0)")]),t._v(" "),a("li",[t._v("location.reload()")])])]),t._v(" "),a("li",[t._v("js跳转页面方法汇总：\n"),a("ol",[a("li",[t._v("window.open(url)")]),t._v(" "),a("li",[t._v('location.href = ""')]),t._v(" "),a("li",[t._v("location.assign(url)")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);